var app=window.angular.module("WebApp",["ng","ngResource"]);app&&console.log("ng:app");

window.app.controller("ListCtrl",["$scope","$rootScope","$http",function(o,e,n){var t=[];o.model=!1,o.search="",o.feed=[];var a=function(e,t){return e?(o.model=e,void n.get("/api/"+e).success(function(e){"InternalError"!==e.code&&(o.feed=e,t&&t())}).error(function(o){console.log(o)})):!1},c=function(e){for(var n in o.feed)if(o.feed[n]._id===e){o.edit=o.feed[n];break}if(!o.edit){var t="/"+o.model+"/new";window.location.pathname!==t&&(window.location.pathname=t)}};o.update=function(){n.put("/api/"+o.model+"/"+o.id,o.edit).success(function(e){console.log(e),o.alert="Message: "+o.model+" updated"}).error(function(o){console.log(o)})},o.create=function(e){n.post("/api/"+o.model,e).success(function(e){o.alert="Message: "+o.model+" created",a(o.model,function(){window.location.pathname="/"+o.model+"/"+e[0]._id})}).error(function(o){console.log(o)})},o.delete=function(){n.delete("/api/"+o.model+"/"+o.id).success(function(){o.alert="Message: "+o.model+" deleted";var e="/"+o.model+"/new";window.location.pathname=e}).error(function(o){console.log(o)})};var l=function(){var o="";for(var e in t)t.hasOwnProperty(e)&&(o=o+"/"+t[e]+"/",t.length-1!=e&&(o+="|"));var n=window.location.pathname.match(new RegExp("(W|^)("+o+")(W|$)"));return n?n[0]:!1};o.setHashId=function(e){console.log(e),window.location.pathname="/"+o.model+"/"+e._id},e.$on("load:resources",function(o,n){t=n,console.log("load:resources");var c=l();c&&(console.log("hash:"+c),c=l(),a(c),e.$emit("load:param",c))}),e.$on("change:model",function(o,e){window.location.pathname="/"+e+"/new",console.log("change:model")}),e.$on("watch:search",function(e,n){o.search=n,console.log("watch:search")}),o.$watch("model",function(e){a(e,function(){c(o.id)}),console.log("watch:model")})}]);
window.app.controller("NavBarCtrl",["$scope","$rootScope","$http",function(e,o,t){e.search="",e.themes=[],e.resources=[];var r=function(){var e="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css",o=window.localStorage.getItem("theme");return null===o?e:o};e.setTheme=function(o){e.theme=o.css,window.localStorage.setItem("theme",o.css)},e.setResource=function(e){o.$emit("change:model",e)},o.$on("load:param",function(o,t){e.model=t,console.log("load:param")}),e.$watch("search",function(e){o.$emit("watch:search",e)}),e.theme=r(),t.get("/properties.json").success(function(t){"InternalError"!==t.code&&(e.resources=t.resources,e.themes=t.themes,o.$emit("load:resources",t.resources||[]))}).error(function(e){console.log(e)})}]);